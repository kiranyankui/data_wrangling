---
title: "DS HW2"
output: github_document
---

# Homework 2 

## Load Libraries 

```{r setup}
library(tidyverse)
library(readxl)
library(haven)
```

## Question 1 

We want to read and clean the NYC transit dataset from the csv file. 

```{r Read/Clean Transit data}
NYC_transit = read_csv("./data/NYC_Transit_Subway_Entrance_And_Exit_Data.csv") %>% 
  janitor::clean_names()

skimr::skim(NYC_transit)
```

Now, we want to retain the following variables:

* line
* station name
* station latitude / longitude
* routes served
* entry
* vending
* entrance type
* ADA compliance 

```{r retain variables}
select(NYC_transit, line, station_name, station_latitude, station_longitude, route1, route2, route3, route4, route5, route6, route7, route8, route9, route10, route11, entry, vending, entrance_type, ada, ada_notes)

NYC_transit
```


Converting the entry variable into a logical vector. 
```{r converting to logical vector}

recode(NYC_transit$entry, "YES"=TRUE,"NO"=FALSE, .default = NA)

NYC_transit
```
It took a while but I figured it out. 


## Description about the NYC_transit dataset

1. The dataset contains 32 columns (variables) and 1868 rows  (observations). 

2. The variables are as follows: division, line, station_name, routes, entrance type, entry, exit only, vending, staffing, staff hours, ADA notes, north south street, east west street, corner, station location, entrance location, ada, free crossover, station lattitude and longitude, and entrance lattitude and longitude. 

3. I read and clean the data; retain line, station, name, station latitude / longitude, routes served, entry, vending, entrance type, and ADA compliance. Convert the entry variable from character (YES vs NO) to a logical variable

4. The data are tidy. 

Answer the following questions using these data:

* How many distinct stations are there? Note that stations are identified both by name and by line (e.g. 125th St 8th Avenue; 125st Broadway; 125st Lenox); the distinct function may be useful here.

```{r distinct stations}
nrow(distinct(NYC_transit, station_name))
```
Ans: There are 356 distinct stations. 

* How many stations are ADA compliant?

```{r distinct stations who are ada-compliant }
NYC_transit %>% 
  select(station_name, ada) %>% 
  filter(ada == TRUE) %>%
  distinct(station_name)

```

Ans: There are 73 distinct stations who are ADA-compliant. 

* What proportion of station entrances / exits without vending allow entrance?

```{r proportion of stations without vending allow entrance}
NYC_transit %>% 
  select(vending, entry) %>% 
  filter(entry == "YES", vending == "NO")

NYC_transit %>% 
  select(vending, entry) %>% 
  filter(vending == "NO")
```

69 station entrances do not have vending and allow entrance.
183 station entrances do not have vending. 

Ans: Proportion of station entrances / exits without vending allow entrance is (69/183)*100 = 37.70%. 

I am reformating data so that route number and route name are distinct variables. 

* How many distinct stations serve the A train? Of the stations that serve the A train, how many are ADA compliant?


NYC_transit_tidy_data = 
  pivot_longer(
    NYC_transit, 
    route1:route11,
    names_to = "route_name", 
    values_to = "rout_number")
    
__Is the above code right?__


## Problem 2    

We want to read and clean the Mr Trash Wheel dataset from the excel file. 

```{r }

Mr_Trash_df = read_excel("./data/Trash-Wheel-Collection-Totals-7-2020-2.xlsx", "Mr. Trash Wheel") %>% 
  janitor::clean_names() %>% 
  select(-x15, -x16, -x17) %>% 
  drop_na(dumpster) %>% 
  transform(sports_balls = as.integer(sports_balls)) %>% 
  dplyr::mutate(ID = row_number())
  
```

__what does it mean by specify the sheet in the Excel file and to omit non-data entries (rows with notes / figures; columns containing notes) using arguments in read_excel?__

I ensured the use of reasonable variable names. 
I have ommited rows that do not include dumpster-specific data. 
I have rounded the number of sports balls to the nearest integer and converted the result to an integer variable. 
I created an ID column (variable) to faciliate the merging of the two datasets. 

```{r }

Pf_Trash_df = read_excel("./data/Trash-Wheel-Collection-Totals-7-2020-2.xlsx", "Professor Trash Wheel") %>% 
  janitor::clean_names() %>% 
  drop_na(dumpster) %>% 
  transform(sports_balls = as.integer(sports_balls)) %>% 
  dplyr::mutate(ID = row_number())
  
```

I used a similar process to import, clean, and organize the data for Professor Trash Wheel. 

__What kind of variables must I create and which kind of join do you want us to do? __

* Inner: keeps data that appear in both x and y
* Left: keeps data that appear in x
* Right: keeps data that appear in y
* Full: keeps data that appear in either x or y


## Problem 3

Loading and cleaning the data in pols-month.csv

```{r}
pols_month_df = read_csv("./data/pols-month.csv") %>% 
  janitor::clean_names() 
  
```







